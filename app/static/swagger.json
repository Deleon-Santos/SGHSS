{
  "swagger": "2.0",
  "info": {
    "title": "SGHSS - API de Consultas",
    "version": "1.0.0",
    "description": "API para gerenciamento de consultas, prescrições, exames e rotinas administrativas (Secretaria) do sistema SGHSS."
  },
  "host": "127.0.0.1:5000",
  "basePath": "/api",
  "schemes": ["http"],
  "consumes": ["application/json"],
  "produces": ["application/json"],

  "paths": {
    "/consulta/{consulta_id}/atendimento": {
      "post": {
        "summary": "Finaliza uma consulta médica",
        "description": "Define o diagnóstico e marca a consulta como 'Realizada'.",
        "parameters": [
          {
            "name": "consulta_id",
            "in": "path",
            "required": true,
            "type": "integer",
            "description": "ID da consulta a ser finalizada"
          },
          {
            "in": "body",
            "name": "body",
            "description": "Diagnóstico da consulta",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "diagnostico": { "type": "string", "example": "Gripe comum" }
              }
            }
          }
        ],
        "responses": {
          "200": { "description": "Consulta finalizada com sucesso" },
          "400": { "description": "Erro de validação" }
        }
      }
    },

    "/consulta/{consulta_id}/prescreve": {
      "post": {
        "summary": "Prescreve um medicamento",
        "description": "Cria uma prescrição vinculada a uma consulta.",
        "parameters": [
          { "name": "consulta_id", "in": "path", "required": true, "type": "integer" },
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": ["nome", "dosagem", "medico_id"],
              "properties": {
                "nome": { "type": "string", "example": "Dipirona" },
                "dosagem": { "type": "string", "example": "500mg a cada 8h" },
                "orientacoes": { "type": "string", "example": "Tomar após as refeições" },
                "medico_id": { "type": "integer", "example": 1 }
              }
            }
          }
        ],
        "responses": {
          "201": { "description": "Medicamento prescrito com sucesso" },
          "400": { "description": "Erro de validação" }
        }
      }
    },

    "/consulta/{consulta_id}/solicita_exame": {
      "post": {
        "summary": "Solicita um exame médico",
        "description": "Solicita um novo exame vinculado a uma consulta existente.",
        "parameters": [
          { "name": "consulta_id", "in": "path", "required": true, "type": "integer" },
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": ["tipo", "medico_id"],
              "properties": {
                "tipo": { "type": "string", "example": "Hemograma completo" },
                "medico_id": { "type": "integer", "example": 1 }
              }
            }
          }
        ],
        "responses": {
          "201": { "description": "Exame solicitado com sucesso" },
          "400": { "description": "Erro de validação" }
        }
      }
    },

    "/agenda/medico/{medico_id}": {
      "get": {
        "summary": "Consulta a agenda do médico",
        "description": "Lista todas as consultas agendadas de um médico, com opção de filtrar por data.",
        "parameters": [
          { "name": "medico_id", "in": "path", "required": true, "type": "integer" },
          { "name": "data", "in": "query", "type": "string", "format": "date", "example": "2025-10-28" }
        ],
        "responses": {
          "200": { "description": "Lista de consultas do médico" },
          "400": { "description": "Erro no formato da data" }
        }
      }
    },

    "/consulta/medico": {
      "post": {
        "summary": "Cadastra um novo médico",
        "description": "Permite à secretaria registrar um novo médico no sistema.",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": ["nome", "especialidade", "crm"],
              "properties": {
                "nome": { "type": "string", "example": "Dr. João Pereira" },
                "especialidade": { "type": "string", "example": "Cardiologia" },
                "crm": { "type": "string", "example": "12345-DF" }
              }
            }
          }
        ],
        "responses": {
          "201": { "description": "Médico cadastrado com sucesso" },
          "400": { "description": "Erro de validação" }
        }
      }
    },

    "/consulta/medico/{medico_id}": {
      "delete": {
        "summary": "Exclui um médico",
        "description": "Permite à secretaria remover um médico cadastrado.",
        "parameters": [
          { "name": "medico_id", "in": "path", "required": true, "type": "integer" }
        ],
        "responses": {
          "200": { "description": "Médico excluído com sucesso" },
          "404": { "description": "Médico não encontrado" }
        }
      }
    },

    "/consulta/paciente": {
      "post": {
        "summary": "Cadastra um novo paciente",
        "description": "Permite à secretaria registrar um novo paciente.",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": ["nome", "cpf", "data_nascimento"],
              "properties": {
                "nome": { "type": "string", "example": "Maria Souza" },
                "cpf": { "type": "string", "example": "123.456.789-00" },
                "data_nascimento": { "type": "string", "format": "date", "example": "1990-05-14" }
              }
            }
          }
        ],
        "responses": {
          "201": { "description": "Paciente cadastrado com sucesso" },
          "400": { "description": "Erro de validação" }
        }
      }
    },

    "/consulta/paciente/{paciente_id}": {
      "delete": {
        "summary": "Exclui um paciente",
        "description": "Permite à secretaria remover um paciente cadastrado.",
        "parameters": [
          { "name": "paciente_id", "in": "path", "required": true, "type": "integer" }
        ],
        "responses": {
          "200": { "description": "Paciente excluído com sucesso" },
          "404": { "description": "Paciente não encontrado" }
        }
      }
    },

    "/consulta/consultas": {
      "get": {
        "summary": "Lista todas as consultas agendadas",
        "description": "Permite à secretaria visualizar todas as consultas, com opção de filtrar por status.",
        "parameters": [
          {
            "name": "status",
            "in": "query",
            "type": "string",
            "description": "Filtra consultas por status (Agendada, Realizada, Cancelada)",
            "example": "Agendada"
          }
        ],
        "responses": {
          "200": { "description": "Lista de consultas recuperada com sucesso" }
        }
      }
    }
  }
}
